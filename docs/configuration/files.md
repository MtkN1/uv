# 設定ファイル

uvは、プロジェクトレベルおよびユーザーレベルでの永続的な設定ファイルをサポートしています。

具体的には、uvは現在のディレクトリまたは最も近い親ディレクトリに`pyproject.toml`または`uv.toml`ファイルを検索します。

!!! note

    ユーザーレベルで動作する`tool`コマンドの場合、ローカル設定ファイルは無視されます。代わりに、uvはユーザーレベルの設定（例：`~/.config/uv/uv.toml`）のみを読み取ります。

ワークスペースでは、uvはワークスペースメンバーに定義された設定を無視して、ワークスペースルートで検索を開始します。ワークスペースは単一のユニットとしてロックされているため、設定はすべてのメンバー間で共有されます。

`pyproject.toml`ファイルが見つかった場合、uvは`[tool.uv]`テーブルから設定を読み取ります。例えば、永続的なインデックスURLを設定するには、次の内容を`pyproject.toml`に追加します：

```toml title="pyproject.toml"
[tool.uv]
index-url = "https://test.pypi.org/simple"
```

（そのようなテーブルがない場合、`pyproject.toml`ファイルは無視され、uvはディレクトリ階層内での検索を続行します。）

uvはまた、`[tool.uv]`プレフィックスを省略した同一の構造を持つ`uv.toml`ファイルも検索します。例えば：

```toml title="uv.toml"
index-url = "https://test.pypi.org/simple"
```

!!! note

    `uv.toml`ファイルは`pyproject.toml`ファイルよりも優先されるため、ディレクトリに`uv.toml`と`pyproject.toml`の両方が存在する場合、設定は`uv.toml`から読み取られ、付随する`pyproject.toml`の`[tool.uv]`セクションは無視されます。

uvはまた、macOSおよびLinuxでは`~/.config/uv/uv.toml`（または`$XDG_CONFIG_HOME/uv/uv.toml`）、Windowsでは`%APPDATA%\uv\uv.toml`でユーザーレベルの設定を発見します。ユーザーレベルの設定は`pyproject.toml`形式ではなく、`uv.toml`形式を使用する必要があります。`pyproject.toml`はPythonの_プロジェクト_を定義することを意図しているためです。

プロジェクトレベルおよびユーザーレベルの設定の両方が見つかった場合、設定はマージされ、プロジェクトレベルの設定が優先されます。具体的には、文字列、数値、またはブール値が両方のテーブルに存在する場合、プロジェクトレベルの値が使用され、ユーザーレベルの値は無視されます。配列が両方のテーブルに存在する場合、配列は連結され、プロジェクトレベルの設定がマージされた配列の前に表示されます。

環境変数を介して提供される設定は永続的な設定よりも優先され、コマンドラインを介して提供される設定は両方よりも優先されます。

uvは、提供された場合、永続的な設定の発見を無効にする`--no-config`コマンドライン引数を受け入れます。

uvはまた、設定ファイルとして使用する`uv.toml`へのパスを受け入れる`--config-file`コマンドライン引数を受け入れます。提供された場合、このファイルは発見された_すべての_設定ファイル（例：ユーザーレベルの設定）に代わって使用されます。

## 設定

利用可能な設定の列挙については、[設定リファレンス](../reference/settings.md)を参照してください。

## pipインターフェースの設定

専用の[`[tool.uv.pip]`](../reference/settings.md#pip)セクションは、`uv pip`コマンドラインインターフェースの_み_を設定するために提供されています。このセクションの設定は、`uv pip`名前空間外の`uv`コマンドには適用されません。ただし、このセクションの設定の多くは、`uv.pip`セクションの値によってオーバーライドされない限り、`uv pip`インターフェースにも適用されるトップレベルの名前空間に対応するものがあります。

`uv.pip`設定はpipのインターフェースに密接に従うように設計されており、グローバル設定が代替デザイン（例：`--no-build`）を使用できるようにするために別々に宣言されています。

例えば、次の`pyproject.toml`のように`[tool.uv.pip]`の下に`index-url`を設定すると、`uv pip`サブコマンド（例：`uv pip install`）のみに影響し、`uv sync`、`uv lock`、`uv run`には影響しません：

```toml title="pyproject.toml"
[tool.uv.pip]
index-url = "https://test.pypi.org/simple"
```
